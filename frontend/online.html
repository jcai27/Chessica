<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chessica | Online Mode</title>
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <link rel="stylesheet" href="./styles.css" />
    <script type="module" src="https://unpkg.com/chessboard-element?module"></script>
    <script type="module" src="https://cdn.skypack.dev/chess.js@1.0.0"></script>
  </head>
  <body>
    <nav class="top-nav">
      <div class="brand">
        <span class="brand-logo">‚ôû</span>
        <span>Chessica</span>
      </div>
      <div class="nav-links">
        <a href="./index.html">Home</a>
        <a href="./online.html" class="active">Online</a>
        <a href="./computer.html">Vs Computer</a>
        <a href="./replay.html">Replay</a>
      </div>
    </nav>
    <div class="app">
      <header class="hero">
        <div class="hero-title">
          <div class="badge">‚ö°</div>
          <div>
            <h1>Online Play</h1>
            <p>Simple matchmaking with shared analysis once matched.</p>
          </div>
        </div>
        <span class="pill">Beta</span>
      </header>

      <section class="card controls">
        <form id="queueForm" class="controls-form">
          <label class="select-field">
            <span>Player ID</span>
            <input type="text" name="player_id" placeholder="your-handle" required />
          </label>
          <label class="select-field">
            <span>Color</span>
            <select name="color">
              <option value="auto" selected>Auto</option>
              <option value="white">White</option>
              <option value="black">Black</option>
            </select>
          </label>
          <label class="select-field">
            <span>Initial (ms)</span>
            <input type="number" name="initial_ms" value="300000" min="60000" step="60000" />
          </label>
          <label class="select-field">
            <span>Increment (ms)</span>
            <input type="number" name="increment_ms" value="2000" min="0" step="1000" />
          </label>
          <button type="submit" id="queueBtn">üöÄ Join Queue</button>
          <button type="button" id="leaveBtn" class="secondary">‚úñ Leave Queue</button>
        </form>
        <div class="difficulty-indicator" id="queueStatus">Not queued.</div>
      </section>

      <section class="layout">
        <div class="card board-card">
          <div class="card-header">
            <h2>Live Board</h2>
            <span id="matchInfo">No match yet.</span>
          </div>
          <div class="board-shell">
            <chess-board id="onlineBoard" draggable-pieces coordinates></chess-board>
          </div>
          <div class="insight-section">
            <h3>Session</h3>
            <p id="sessionIdDisplay"></p>
            <p id="playerColorDisplay"></p>
            <div class="clock-stack">
              <div class="clock-tile opponent" id="blackClockTile">
                <div class="clock-meta">
                  <span class="clock-dot clock-dot--black"></span>
                  <span class="clock-label" id="blackClockLabel">Black</span>
                </div>
                <div class="clock-value-wrap">
                  <span class="clock-value" id="blackClock">05:00</span>
                  <div class="clock-progress"><span id="blackClockProgress"></span></div>
                </div>
              </div>
              <div class="clock-tile player" id="whiteClockTile">
                <div class="clock-meta">
                  <span class="clock-dot clock-dot--white"></span>
                  <span class="clock-label" id="whiteClockLabel">White</span>
                </div>
                <div class="clock-value-wrap">
                  <span class="clock-value" id="whiteClock">05:00</span>
                  <div class="clock-progress"><span id="whiteClockProgress"></span></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="insight-stack">
          <section class="card insight-card">
            <div class="card-header">
              <div>
                <h2>Move Log</h2>
                <span>both players</span>
              </div>
              <div class="insight-actions">
                <input type="text" id="sessionInput" placeholder="session id (if known)" />
                <button type="button" id="loadSessionBtn" class="secondary">‚Üª Load Session</button>
                <button type="button" id="resignBtn" class="secondary">üè≥Ô∏è Resign</button>
                <button type="button" id="drawBtn" class="secondary">ü§ù Offer Draw</button>
                <button type="button" id="abortBtn" class="secondary">‚èπ Abort</button>
              </div>
            </div>
            <ol id="onlineMoveList"></ol>
            <div class="empty-state" id="moveEmptyState">
              <span class="emoji">üìÑ</span>
              <div>
                <strong>No moves yet.</strong>
                <div>Make the first move to start the log.</div>
              </div>
            </div>
          </section>

          <section class="card insight-card">
            <div class="card-header">
              <div>
                <h2>Status</h2>
                <span>stream + matchmaking</span>
              </div>
            </div>
            <div class="insight-section">
              <h3>Messages</h3>
              <ul id="onlineMessages" class="analysis-moves"></ul>
              <div class="empty-state" id="messagesEmptyState">
                <span class="emoji">üí¨</span>
                <div>
                  <strong>Waiting for updates...</strong>
                  <div>Matchmaking and stream events will show up here.</div>
                </div>
              </div>
            </div>
          </section>
        </div>
      </section>
    </div>
    <script type="module" src="./online.js"></script>
  </body>
</html>
